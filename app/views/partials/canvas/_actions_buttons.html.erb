<% actions_list ||= canvas_actions_list(params) %>

<% if actions_list.include?(:show) %>
  <%= link_to diagram_canvas_path(diagram), class: "btn btn-xs btn-outline-info", target: "_blank" do %>
    <i class="fas fa-eye"></i> Preview
  <% end %>
<% end %>

<% if actions_list.include?(:edit) %>
  <%= link_to edit_diagram_canvas_path(diagram), class: "btn btn-xs btn-outline-primary" do %>
    <i class="fas fa-pen-square"></i> Edit Background
  <% end %>
<% end %>

<% if actions_list.include?(:draw) %>
  <%= link_to draw_diagram_canvas_path(diagram), class: "btn btn-xs btn-outline-success" do %>
    <i class="fas fa-pencil-ruler"></i> Draw
  <% end %>
<% end %>

<% if actions_list.include?(:integrate) %>
  <%= link_to diagram_canvas_path(diagram),
              data: { target: "#collapseCode", toggle: "collapse"},
              class: "btn btn-xs btn-outline-secondary" do %>
    <i class="fas fa-code"></i> Integrate
  <% end %>
<% end %>

<% if actions_list.include?(:delete) %>
  <%= link_to diagram_canvas_path(diagram), method: :delete,
              data: { confirm: "Are you sure you want to delete this canvas? This will delete all the text, the links, and the background image too."},
              class: "btn btn-xs btn-outline-warning" do %>
    <i class="fas fa-eraser"></i> Delete Canvas
  <% end %>
<% end %>

<% if actions_list.include?(:new) %>
  <%= link_to new_diagram_canvas_path(diagram), class: "btn btn-xs btn-outline-primary" do %>
    <i class="far fa-file"></i> Start Canvas
  <% end %>
<% end %>


<div class="collapse" id="collapseCode">
  <div class="card card-body bg-light" style="margin-top:5px;">
    <textarea rows="3" cols="6"><iframe src="<%= Rails.root.join('app', diagram_canvas_path(diagram)) %>>" title="Diagram <%= diagram.name %>"></iframe></textarea>
  </div>
</div>